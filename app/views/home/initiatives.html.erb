<div id="googlemaps"></div>

Iniciativas Ambientales
<div class=\"row\">
  <div class=\"col-md-9\">
    <div id=\"initiatives_form\">
      <%= form_tag initiatives_path, :method => :get, remote: true do |f| %>
        <!-- <%= select_tag :section, options_from_collection_for_select(Section.all, "id", "title", params[:section] || ""), prompt: "Seleccionar SecciÃ³n", class: "chosen-select" %> -->
        <%= select_tag :area, options_from_collection_for_select(Area.comunas.all, "id", "name", params[:area] || ""), include_blank:  t('.select_area'), class: "chosen-select", id: "initiatives_area_select", onchange: "$(this).parent('form').submit();"%>
        <!-- <%= submit_tag t('.select_area'), class: "btn", id:"initiatives_form_button" %> -->
      <% end %>
    </div>
    <div id="initiatives_list">

    </div>
  </div>
</div>

<!-- Include the Google Maps API library - required for embedding maps -->
<script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">

// The latitude and longitude of your business / place
var position = [-33.446165, -70.665767];

function showGoogleMaps() {

    var latLng = new google.maps.LatLng(position[0], position[1]);

    var mapOptions = {
        zoom: 10, // initialize zoom level - the max value is 21
        streetViewControl: false, // hide the yellow Street View pegman
        scaleControl: false, // allow users to zoom the Google Map
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: latLng
    };

    map = new google.maps.Map(document.getElementById('googlemaps'),
        mapOptions);

    // Show the default red marker at the location
    marker = new google.maps.Marker({
        position: latLng,
        map: map,
        draggable: false,
        animation: google.maps.Animation.DROP
    });

    <% vitacura = Area.find_by_name 'Vitacura' %>
    <% geojson_polygon = RGeo::GeoJSON.encode vitacura.geom%>

    var geojson = JSON.parse("{ \"type\": \"FeatureCollection\", \"features\": [{  \"type\": \"Feature\",  \"geometry\": {    \"type\": \"Point\",    \"coordinates\": [-70.565767, -33.446165]  },  \"properties\": {    \"name\": \"Dinagat Islands\"  }}]}");
    map.data.addGeoJson(geojson);


    var geojson_polygon = JSON.parse("{    \"type\": \"Feature\",    \"geometry\": {        \"type\":\"MultiPolygon\", \"coordinates\":[[[[35.303612313, 63.085742115], [35.36040170999998, 73.0819561], [45.35383417999996, 63.08291937], [35.303612313, 63.085742115]]]]    },    \"properties\": {        \"name\": \"Plaza Road Park\"    }}");
    map.data.addGeoJson(geojson_polygon);

}

google.maps.event.addDomListener(window, 'load', showGoogleMaps);
</script>
